---
title: JavaScript-手写方法
date: 2023-12-15
tags:
  - 前端
  - javaScript
categories:
  - JavaScript
---

## push 方法

```js
Array.prototype.myPush = function (...items) {
  // 1. Let O be ? ToObject(this value).
  // 定义一个O接收this,同时this要转换为一个对象
  let O = Object(this)
  // 2. Let len be ? LengthOfArrayLike(O).
  // 通过let定义长度len，x >>> 0 是为了保证x为数字类型
  let len = this.length >>> 0
  // 3. Let be the number of elements in .argCountitems
  let argCount = items.length >>> 0
  // 4. If + > 253 - 1, throw a TypeError exception.lenargCount
  // 如果len个argCount相加超过js能表示的最大正整数，则抛出异常
  if (len + argCount > 2 ** 53 - 1) {
    throw new TypeError('超出最大值')
  }

  /**
   * 5. For each element of , doEitems
   * a. Perform ? Set(, ! ToString(𝔽()), , true).OlenE
   * b. Set to + 1.lenlen
   * 如果没有超出最大值，开始循环items
   * 将items的每一个值都赋值给原数组的最后一位
   */

  for (let i = 0; i < argCount; i++) {
    O[len + i] = items[i]
  }

  // 获取到新的数组的长度
  let newLen = len + argCount
  // 将新的长度赋值给数组
  O.length = newLen

  // 返回新的长度
  return newLen
}

Array.prototype.getThis = function () {
  return this
}
```
