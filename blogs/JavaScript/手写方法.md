---
title: JavaScript-æ‰‹å†™æ–¹æ³•
date: 2023-12-15
tags:
  - å‰ç«¯
  - javaScript
categories:
  - JavaScript
---

## push æ–¹æ³•

```js
Array.prototype.myPush = function (...items) {
  // 1. Let O be ? ToObject(this value).
  // å®šä¹‰ä¸€ä¸ªOæ¥æ”¶this,åŒæ—¶thisè¦è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡
  let O = Object(this)
  // 2. Let len be ? LengthOfArrayLike(O).
  // é€šè¿‡letå®šä¹‰é•¿åº¦lenï¼Œx >>> 0 æ˜¯ä¸ºäº†ä¿è¯xä¸ºæ•°å­—ç±»å‹
  let len = this.length >>> 0
  // 3. Let be the number of elements in .argCountitems
  let argCount = items.length >>> 0
  // 4. If + > 253 - 1, throw a TypeError exception.lenargCount
  // å¦‚æœlenä¸ªargCountç›¸åŠ è¶…è¿‡jsèƒ½è¡¨ç¤ºçš„æœ€å¤§æ­£æ•´æ•°ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
  if (len + argCount > 2 ** 53 - 1) {
    throw new TypeError('è¶…å‡ºæœ€å¤§å€¼')
  }

  /**
   * 5. For each element of , doEitems
   * a. Perform ? Set(, ! ToString(ğ”½()), , true).OlenE
   * b. Set to + 1.lenlen
   * å¦‚æœæ²¡æœ‰è¶…å‡ºæœ€å¤§å€¼ï¼Œå¼€å§‹å¾ªç¯items
   * å°†itemsçš„æ¯ä¸€ä¸ªå€¼éƒ½èµ‹å€¼ç»™åŸæ•°ç»„çš„æœ€åä¸€ä½
   */

  for (let i = 0; i < argCount; i++) {
    O[len + i] = items[i]
  }

  // è·å–åˆ°æ–°çš„æ•°ç»„çš„é•¿åº¦
  let newLen = len + argCount
  // å°†æ–°çš„é•¿åº¦èµ‹å€¼ç»™æ•°ç»„
  O.length = newLen

  // è¿”å›æ–°çš„é•¿åº¦
  return newLen
}

Array.prototype.getThis = function () {
  return this
}
```
