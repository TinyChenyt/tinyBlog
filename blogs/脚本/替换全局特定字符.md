---
title: 检测文件变化
date: 2024-9-6
tags:
  - 前端
  - javaScript
categories:
  - JavaScript
---

```js
//获取url中的参数
function getQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var reg_rewrite = new RegExp("(^|/)" + name + "/([^/]*)(/|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    var q = window.location.pathname.substr(1).match(reg_rewrite);
    if (r != null) {
        return unescape(r[2]);
    } else if (q != null) {
        return unescape(q[2]);
    } else {
        return '';
    }
}

function initKey(Language, keyId) {
    var lang = getQueryString('language');

    if (!lang) {
        return;
    }

    document.body.className = lang;
    var keyObj = Language[keyId];
    var langObj = Language[lang];
    var regex = /\{\#\s([^}]+)\s\#\}/g;
    var bodyHTML = document.body.innerHTML;
    var match = bodyHTML.match(regex, 'g');

    match.forEach((item) => {
        for (var key in keyObj) {
            var keyItem = `{# ${keyObj[key]} #}`;
            if (item == keyItem) {
                bodyHTML = bodyHTML.replace(item, langObj[key]);
            }
        }
    });

    document.body.innerHTML = bodyHTML;
}
```